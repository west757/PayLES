<div>
    <table class="core">
        <tbody>
            <tr class="core-header">
                <td class="core-header"></td>
                {% for x in session.col_headers[1:] %}
                <td class="core-header">{{x}}</td>
                {% endfor %}
            </tr>

            <!-- variables -->
            {% if session['showallvariables'] %}
                {% for header, dtype, modal in config.PAYDF_VARIABLES %}
                <tr class="core">
                    <td class="core">
                        <label class="modalbutton" for="modal-{{ modal }}">{{ header }}</label>
                    </td>
                    {% for x in range(1, session['paydf'].shape[1]) %}
                        <td class="core">
                            {% set value = session['paydf'].at[session['row_headers'].index(header), session['col_headers'][x]] %}
                            {{ value }}
                        </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            <tr class="core-spacer"><td class="core-spacer" colspan=100%></td></tr>
            <tr class="core-spacer"><td class="core-spacer" colspan=100%></td></tr>
            {% endif %}


            <!-- entitlements -->
            {% for row in session['row_headers'] %}
                {% set row_info = config.PAYDF_TEMPLATE[config.PAYDF_TEMPLATE['header'] == row] %}
                {% if row_info.shape[0] > 0 and row_info.iloc[0]['type'] == 'E' %}
                <tr class="core">
                    <td class="core">
                        <label class="modalbutton" for="modal-{{ row_info.iloc[0]['modal'] }}">{{ row }}</label>
                    </td>
                    {% for x in range(1, session['paydf'].shape[1]) %}
                    <td class="core">
                        {% set value = session['paydf'].at[session['row_headers'].index(row), session['col_headers'][x]] %}
                        {% if value is number %}
                            {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                        {% else %}
                            {{ value }}
                        {% endif %}
                    </td>
                    {% endfor %}
                </tr>
                {% endif %}
            {% endfor %}


            <!-- deductions -->
            {% for row in session['row_headers'] %}
                {% set row_info = config.PAYDF_TEMPLATE[config.PAYDF_TEMPLATE['header'] == row] %}
                {% if row_info.shape[0] > 0 and row_info.iloc[0]['type'] == 'D' %}
                <tr class="core">
                    <td class="core">
                        <label class="modalbutton" for="modal-{{ row_info.iloc[0]['modal'] }}">{{ row }}</label>
                    </td>
                    {% for x in range(1, session['paydf'].shape[1]) %}
                    <td class="core">
                        {% set value = session['paydf'].at[session['row_headers'].index(row), session['col_headers'][x]] %}
                        {% if value is number %}
                            {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                        {% else %}
                            {{ value }}
                        {% endif %}
                    </td>
                    {% endfor %}
                </tr>
                {% endif %}
            {% endfor %}


            <!-- allotments -->
            {% for row in session['row_headers'] %}
                {% set row_info = config.PAYDF_TEMPLATE[config.PAYDF_TEMPLATE['header'] == row] %}
                {% if row_info.shape[0] > 0 and row_info.iloc[0]['type'] == 'A' %}
                <tr class="core">
                    <td class="core">
                        <label class="modalbutton" for="modal-{{ row_info.iloc[0]['modal'] }}">{{ row }}</label>
                    </td>
                    {% for x in range(1, session['paydf'].shape[1]) %}
                    <td class="core">
                        {% set value = session['paydf'].at[session['row_headers'].index(row), session['col_headers'][x]] %}
                        {% if value is number %}
                            {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                        {% else %}
                            {{ value }}
                        {% endif %}
                    </td>
                    {% endfor %}
                </tr>
                {% endif %}
            {% endfor %}


            <tr class="core"><td class="core-spacer" colspan=100%></td></tr>
            <tr class="core"><td class="core-spacer" colspan=100%></td></tr>


            <!-- calculations -->
            <tr class="core">
                <td class="core"><label class="modalbutton" for="modal-taxpay">Taxable Pay</label></td>
                {% for x in range(1, session['paydf'].shape[1]) %}
                {% set value = session['paydf'].at[session['row_headers'].index("Taxable Pay"), session['col_headers'][x]] %}
                <td class="core">
                    {% if value is number %}
                        {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                    {% else %}
                        {{ value }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>

            <tr class="core">
                <td class="core"><label class="modalbutton" for="modal-taxpay">Non-Taxable Pay</label></td>
                {% for x in range(1, session['paydf'].shape[1]) %}
                {% set value = session['paydf'].at[session['row_headers'].index("Non-Taxable Pay"), session['col_headers'][x]] %}
                <td class="core">
                    {% if value is number %}
                        {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                    {% else %}
                        {{ value }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>

            <tr class="core">
                <td class="core"><label class="modalbutton" for="modal-taxpay">Total Taxes</label></td>
                {% for x in range(1, session['paydf'].shape[1]) %}
                {% set value = session['paydf'].at[session['row_headers'].index("Total Taxes"), session['col_headers'][x]] %}
                <td class="core">
                    {% if value is number %}
                        {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                    {% else %}
                        {{ value }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>

            <tr class="core">
                <td class="core"><label class="modalbutton" for="modal-grossnetpay">Gross Pay</label></td>
                {% for x in range(1, session['paydf'].shape[1]) %}
                {% set value = session['paydf'].at[session['row_headers'].index("Gross Pay"), session['col_headers'][x]] %}
                <td class="core">
                    {% if value is number %}
                        {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                    {% else %}
                        {{ value }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>

            <tr class="core">
                <td class="core"><label class="modalbutton" for="modal-grossnetpay">Net Pay</label></td>
                {% for x in range(1, session['paydf'].shape[1]) %}
                {% set value = session['paydf'].at[session['row_headers'].index("Net Pay"), session['col_headers'][x]] %}
                <td class="core">
                    {% if value is number %}
                        {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                    {% else %}
                        {{ value }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>

            <tr class="core">
                <td class="core"><label class="modalbutton" for="modal-grossnetpay">Difference</label></td>
                <td class="core">&mdash;</td>
                {% for x in range(2, session['paydf'].shape[1]) %}
                {% set value = session['paydf'].at[session['row_headers'].index("Difference"), session['col_headers'][x]] %}
                <td class="core">
                    {% if value is number %}
                        {{ '${:,.2f}'.format(value).replace('$-','-$') }}
                    {% else %}
                        {{ value }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>

        </tbody>
    </table>
</div>
